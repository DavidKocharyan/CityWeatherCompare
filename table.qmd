---
title: "Weather Data Comparison"
author: "David Kocharyan"
format: html
css: styles.css
execute: 
  echo: false
---

```{r setup, include=FALSE}
# Load necessary libraries
library(plotly)
```

```{r}
# Data for Yerevan
data_yerevan <- data.frame(
  time = as.POSIXct(c("2023-11-16 21:12:30", "2023-11-16 21:27:30", "2023-11-16 21:42:30", "2023-11-16 21:57:30", "2023-11-16 22:12:30",
                      "2023-11-16 22:27:30", "2023-11-16 22:42:30", "2023-11-16 22:57:30", "2023-11-16 23:12:30", "2023-11-16 23:27:30",
                      "2023-11-16 23:42:30", "2023-11-16 23:57:30", "2023-11-17 00:12:30", "2023-11-17 00:27:30", "2023-11-17 00:42:30")),
  temperature = c(11.67, 11.39, 10.94, 11.4, 10.54, 10.63, 10.23, 9.99, 10.47, 10.44, 10.57, 11.01, 10.57, 10.76, 10.43),
  pressure = c(864.82, 864.78, 864.49, 864.15, 864.18, 864.02, 863.86, 863.79, 863.66, 863.65, 863.4, 863.12, 863.35, 863.18, 863.04),
  humidity = c(57.64, 58.35, 66.08, 61.07, 67.31, 67.27, 69.9, 69.94, 66.02, 67.49, 67.81, 64.72, 69.27, 67.32, 69.9)
)

# Data for Gavar
data_gavar <- data.frame(
  time = as.POSIXct(c("2023-11-16 21:12:30", "2023-11-16 21:27:30", "2023-11-16 21:42:30", "2023-11-16 21:57:30", "2023-11-16 22:12:30",
                      "2023-11-16 22:27:30", "2023-11-16 22:42:30", "2023-11-16 22:57:30", "2023-11-16 23:12:30", "2023-11-16 23:27:30",
                      "2023-11-16 23:42:30", "2023-11-16 23:57:30", "2023-11-17 00:12:30", "2023-11-17 00:27:30", "2023-11-17 00:42:30", "2023-11-16 23:42:30")),
  temperature = c(2.03, 2.14, 3.22, 3.01, 1.88, 2.59, 3.09, 1.9, 0.97, 1.4, 1.74, 1.58, 2.04, 1.64, 1.59, 2.65),
  pressure = c(865.44, 865.23, 865.11, 864.9, 864.84, 864.63, 864.59, 864.58, 864.32, 864.05, 863.97, 863.73, 863.67, 863.65, 863.45, 863.33),
  humidity = c(65.32, 68.23, 67.84, 64.98, 74.68, 74.7, 72.37, 74.91, 79.32, 77.78, 73.8, 68.78, 71.75, 72.36, 75.42, 70.61)
)
```


```{r}
# Plotly figure
fig <- plot_ly()

# Add Yerevan data
fig <- fig %>% add_lines(data = data_yerevan, x = ~time, y = ~temperature, name = "Yerevan Temperature", line = list(color = "blue"), visible = TRUE)
fig <- fig %>% add_lines(data = data_yerevan, x = ~time, y = ~pressure, name = "Yerevan Pressure", line = list(color = "blue"), visible = FALSE)
fig <- fig %>% add_lines(data = data_yerevan, x = ~time, y = ~humidity, name = "Yerevan Humidity", line = list(color = "blue"), visible = FALSE)

# Add Gavar data
fig <- fig %>% add_lines(data = data_gavar, x = ~time, y = ~temperature, name = "Gavar Temperature", line = list(color = "orange"), visible = TRUE)
fig <- fig %>% add_lines(data = data_gavar, x = ~time, y = ~pressure, name = "Gavar Pressure", line = list(color = "orange"), visible = FALSE)
fig <- fig %>% add_lines(data = data_gavar, x = ~time, y = ~humidity, name = "Gavar Humidity", line = list(color = "orange"), visible = FALSE)

fig <- fig %>% layout(
  title = "Weather Data Comparison",
  xaxis = list(title = "Time"),
  yaxis = list(title = "Temperature in Celsius"),
  updatemenus = list(
    list(
      type = "buttons",
      direction = "down",
      buttons = list(
        list(
          method = "restyle",
          args = list("visible", list(TRUE, FALSE, FALSE, TRUE, FALSE, FALSE)),
          label = "Temperature"
        ),
        list(
          method = "restyle",
          args = list("visible", list(FALSE, TRUE, FALSE, FALSE, TRUE, FALSE)),
          label = "Pressure"
        ),
        list(
          method = "restyle",
          args = list("visible", list(FALSE, FALSE, TRUE, FALSE, FALSE, TRUE)),
          label = "Humidity"
        )
      ),
      showactive = TRUE
    )
  ))

fig
```


